{"ast":null,"code":"import _classCallCheck from\"/Users/homebase/Desktop/dreadful-visitation-site/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/homebase/Desktop/dreadful-visitation-site/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/homebase/Desktop/dreadful-visitation-site/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/homebase/Desktop/dreadful-visitation-site/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import*as d3 from'd3';import{jsx as _jsx}from\"react/jsx-runtime\";var StreamChart=/*#__PURE__*/function(_React$Component){_inherits(StreamChart,_React$Component);var _super=_createSuper(StreamChart);function StreamChart(){_classCallCheck(this,StreamChart);return _super.apply(this,arguments);}_createClass(StreamChart,[{key:\"componentDidMount\",value:function componentDidMount(){this.drawChart();}},{key:\"drawChart\",value:function drawChart(){// set the dimensions and margins of the graph\nvar margin={top:20,right:30,bottom:30,left:60},width=this.props.width-margin.left-margin.right,height=this.props.height-margin.top-margin.bottom;// append the svg object to the body of the page\nvar svg=this.svg.attr(\"width\",width+margin.left+margin.right).attr(\"height\",height+margin.top+margin.bottom).append(\"g\").attr(\"transform\",\"translate(\"+margin.left+\",\"+margin.top+\")\");// Parse the Data\n//d3.csv(\"https://raw.githubusercontent.com/holtzy/data_to_viz/master/Example_dataset/5_OneCatSevNumOrdered_wide.csv\", function(data) {\nd3.csv(this.props.data,function(data){// List of groups = header of the csv files\nvar keys=data.columns.slice(1);// Add X axis\nvar x=d3.scaleLinear().domain([1,52]).range([0,width]);svg.append(\"g\").attr(\"transform\",\"translate(0,\"+height+\")\").call(d3.axisBottom(x).ticks(52));var gridlines=d3.axisBottom().ticks(52).tickFormat(\"\").tickSize(height).scale(x);svg.append(\"g\").attr(\"class\",\"grid\").call(gridlines);// Add Y axis\nvar y=d3.scaleLinear().domain([-750,750]).range([height,0]);// color palette\nvar color=d3.scaleOrdinal().domain(keys).range([\"#F94D50\",\"#f3722c\",\"#f8961e\",\"#f9844a\",\"#f9c74f\",\"#90be6d\",\"#43aa8b\",\"#4d908e\",\"#277da1\"]);//stack the data?\nvar stackedData=d3.stack().offset(d3.stackOffsetSilhouette).keys(keys)(data);var Tooltip=svg.append(\"text\").attr(\"x\",35).attr(\"y\",25).style(\"opacity\",0).style(\"font-size\",17);var mouseover=function mouseover(d){console.log(d);Tooltip.style(\"opacity\",1);d3.selectAll(\".myArea\").style(\"opacity\",.2);d3.select(this).style(\"stroke\",\"white\").style(\"opacity\",1);};var mousemove=function mousemove(d,i){// Gets the key\nvar grp=keys[i];// Gets the week\nvar mousex=d3.mouse(this);mousex=mousex[0];var invert=Math.floor(x.invert(mousex));// Sets tooltip to the new string\nTooltip.text(\"Week \"+invert+\"- \"+grp+\": \"+data[invert-1][grp]);};var mouseleave=function mouseleave(d){Tooltip.style(\"opacity\",0);d3.selectAll(\".myArea\").style(\"opacity\",1).style(\"stroke\",\"none\");};// Show the areas\nsvg.selectAll(\"mylayers\").data(stackedData).enter().append(\"path\").attr(\"class\",\"myArea\").style(\"fill\",function(d){return color(d.key);}).attr(\"d\",d3.area().curve(d3.curveMonotoneX).x(function(d,i){return x(d.data.week_number);}).y0(function(d){return y(d[0]);}).y1(function(d){return y(d[1]);})).on(\"mouseover\",mouseover).on(\"mousemove\",mousemove).on(\"mouseleave\",mouseleave);});}},{key:\"render\",value:function render(){var _this=this;return/*#__PURE__*/_jsx(\"svg\",{width:this.props.width,height:this.props.height,ref:function ref(handle){_this.svg=d3.select(handle);}});}}]);return StreamChart;}(React.Component);export default StreamChart;","map":{"version":3,"sources":["/Users/homebase/Desktop/dreadful-visitation-site/src/components/StreamChart.js"],"names":["React","d3","StreamChart","drawChart","margin","top","right","bottom","left","width","props","height","svg","attr","append","csv","data","keys","columns","slice","x","scaleLinear","domain","range","call","axisBottom","ticks","gridlines","tickFormat","tickSize","scale","y","color","scaleOrdinal","stackedData","stack","offset","stackOffsetSilhouette","Tooltip","style","mouseover","d","console","log","selectAll","select","mousemove","i","grp","mousex","mouse","invert","Math","floor","text","mouseleave","enter","key","area","curve","curveMonotoneX","week_number","y0","y1","on","handle","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport * as d3 from 'd3';\n\nclass StreamChart extends React.Component {\n    componentDidMount() {\n    this.drawChart();\n}\n\n    drawChart() {\n        // set the dimensions and margins of the graph\n        var margin = {top: 20, right: 30, bottom: 30, left: 60},\n        width = this.props.width - margin.left - margin.right,\n        height = this.props.height - margin.top - margin.bottom;\n\n        // append the svg object to the body of the page\n        var svg = this.svg\n            .attr(\"width\", width + margin.left + margin.right)\n            .attr(\"height\", height + margin.top + margin.bottom)\n            .append(\"g\")\n            .attr(\"transform\",\n                \"translate(\" + margin.left + \",\" + margin.top + \")\");\n\n\n        \n\n        // Parse the Data\n        //d3.csv(\"https://raw.githubusercontent.com/holtzy/data_to_viz/master/Example_dataset/5_OneCatSevNumOrdered_wide.csv\", function(data) {\n        d3.csv(this.props.data, function(data) {\n        // List of groups = header of the csv files\n            var keys = data.columns.slice(1)\n\n            // Add X axis\n            var x = d3.scaleLinear()\n            .domain([1, 52])\n            .range([ 0, width ]);\n\n            svg.append(\"g\")\n                .attr(\"transform\", \"translate(0,\" + height + \")\")\n                .call(d3.axisBottom(x).ticks(52));\n\n\n            var gridlines = d3.axisBottom()\n                .ticks(52)\n                .tickFormat(\"\")\n                .tickSize(height)\n                .scale(x);\n\n            svg.append(\"g\")\n                .attr(\"class\", \"grid\")\n                .call(gridlines)  \n\n            // Add Y axis\n            var y = d3.scaleLinear()\n                .domain([-750, 750])\n                .range([ height, 0 ]);\n            \n           \n            // color palette\n            var color = d3.scaleOrdinal()\n                .domain(keys)\n                .range([\"#F94D50\",\"#f3722c\",\"#f8961e\",\"#f9844a\",\"#f9c74f\",\"#90be6d\",\"#43aa8b\",\"#4d908e\",\"#277da1\"])\n\n            //stack the data?\n            var stackedData = d3.stack()\n                .offset(d3.stackOffsetSilhouette)\n                .keys(keys)\n                (data)\n\n\n            var Tooltip = svg\n                .append(\"text\")\n                .attr(\"x\", 35)\n                .attr(\"y\", 25)\n                .style(\"opacity\", 0)\n                .style(\"font-size\", 17)\n\n            var mouseover = function(d) {\n                console.log(d)\n                Tooltip.style(\"opacity\", 1)\n                d3.selectAll(\".myArea\").style(\"opacity\", .2)\n                d3.select(this)\n                .style(\"stroke\", \"white\")\n                .style(\"opacity\", 1)\n            }\n\n            var mousemove = function(d,i) {\n            // Gets the key\n                let grp = keys[i]\n                // Gets the week\n                let mousex = d3.mouse(this);\n                mousex = mousex[0];\n                let invert = Math.floor(x.invert(mousex));\n\n                // Sets tooltip to the new string\n                Tooltip.text(\"Week \" + invert + \"- \" + grp + \": \"  + data[invert-1][grp]);\n            }\n\n            var mouseleave = function(d) {\n                Tooltip.style(\"opacity\", 0)\n                d3.selectAll(\".myArea\").style(\"opacity\", 1).style(\"stroke\", \"none\")\n            }\n\n            // Show the areas\n            svg\n                .selectAll(\"mylayers\")\n                .data(stackedData)\n                .enter()\n                .append(\"path\")\n                .attr(\"class\", \"myArea\")\n                    .style(\"fill\", function(d) { return color(d.key); })\n                .attr(\"d\", d3.area()\n                    .curve(d3.curveMonotoneX)\n                    .x(function(d, i) { return x(d.data.week_number); })\n                    .y0(function(d) { return y(d[0]); })\n                    .y1(function(d) { return y(d[1]); })\n                )\n                .on(\"mouseover\", mouseover)\n                .on(\"mousemove\", mousemove)\n                .on(\"mouseleave\", mouseleave)\n\n        })\n    }\n\n    render(){\n        return <svg width={this.props.width} height={this.props.height}\n                ref={handle => {this.svg = d3.select(handle)}}></svg>\n    }\n\n}\n\nexport default StreamChart;"]},"metadata":{},"sourceType":"module"}